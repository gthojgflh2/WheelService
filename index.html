<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <h3>üé° –ö–æ–ª–µ—Å–æ —Ñ–æ—Ä—Ç—É–Ω—ã (—Ç–µ—Å—Ç)</h3>
    
    <button onclick="spinWheel()" style="padding: 20px; font-size: 20px;">üé° –ö–†–£–¢–ò–¢–¨</button>
    
    <div id="result" style="margin-top: 20px; font-size: 18px;"></div>

    <script>
        let tg = window.Telegram.WebApp;
        tg.ready();
        tg.expand();
        
        console.log('WebApp version:', tg.version);
        
        const prizes = [
            { name: '1 –ß–ê–°', value: 60, emoji: '‚è±Ô∏è', display: '1 —á–∞—Å' },
            { name: '2 –ß–ê–°–ê', value: 120, emoji: '‚è±Ô∏è', display: '2 —á–∞—Å–∞' },
            { name: '3 –ß–ê–°–ê', value: 180, emoji: '‚è±Ô∏è', display: '3 —á–∞—Å–∞' },
            { name: '6 –ß–ê–°–û–í', value: 360, emoji: '‚è±Ô∏è', display: '6 —á–∞—Å–æ–≤' },
            { name: '2 –°–õ–û–¢–ê', value: 2, emoji: 'üß©', display: '2 —Å–ª–æ—Ç–∞' },
            { name: '–õ–û–¢–ï–†–ï–Ø', value: 1, emoji: 'üé∞', display: '–õ–æ—Ç–µ—Ä–µ—è' },
            { name: '+1', value: 1, emoji: '‚ú®', display: '+1 –ø—Ä–æ–∫—Ä—É—Ç' },
            { name: '–ü–†–û–ú–û', value: 50, emoji: 'üéüÔ∏è', display: '–ü—Ä–æ–º–æ–∫–æ–¥' },
            { name: '25 –ì–†–ù', value: 25, emoji: 'üí∞', display: '25 –≥—Ä–Ω' },
            { name: '50 –ì–†–ù', value: 50, emoji: 'üí∞', display: '50 –≥—Ä–Ω' }
        ];
        
        function getRandomPrize() {
            const weights = [30, 20, 15, 5, 2, 4, 8, 1, 12, 3];
            const total = weights.reduce((a, b) => a + b, 0);
            let rand = Math.random() * total;
            
            let sum = 0;
            for (let i = 0; i < weights.length; i++) {
                sum += weights[i];
                if (rand < sum) {
                    console.log(`üéØ –í—ã–ø–∞–ª: ${prizes[i].name} (–≤–µ—Å ${weights[i]})`);
                    return prizes[i];
                }
            }
            return prizes[0];
        }
        
        function spinWheel() {
            const prize = getRandomPrize();
            
            const data = {
                type: 'free',
                prize: {
                    name: prize.name,
                    value: prize.value
                }
            };
            
            console.log('üì§ –û—Ç–ø—Ä–∞–≤–ª—è–µ–º:', data);
            tg.sendData(JSON.stringify(data));
            
            document.getElementById('result').innerHTML = `
                üéâ –í—ã–∏–≥—Ä—ã—à: ${prize.emoji} ${prize.display}!<br>
                <small>–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –±–æ—Ç–∞</small>
            `;
        }
    </script>
</body>
</html>
